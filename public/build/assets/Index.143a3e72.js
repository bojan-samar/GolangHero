import{D as p,j as d,o as a,c as u,w as c,a as s,s as _,t as i,e as f,f as b,b as h,g as y,n as g}from"./app.39e6d5d9.js";import{_ as S}from"./AppLayout.0ac4dc5a.js";import{_ as x}from"./PrimaryButton.ccbb7195.js";import"./Banner.9d1e388e.js";const v={class:"py-12 max-w-4xl mx-auto"},j=["onSubmit"],k=s("h1",{class:"text-center font-bold text-lg mb-4"},"Checkout",-1),w=s("div",{id:"payment-element",class:"mt-5"},null,-1),C={key:0,class:"mt-2 text-red-600"},V={__name:"Index",props:{clientSecret:String,stripeKey:String,returnUrl:String,job:Object,jobPrice:Number},setup(n){const o=n,e=p({stripe:null,elements:null,processing:!1,error:null}),l=()=>{e.stripe=Stripe(o.stripeKey);const t={clientSecret:o.clientSecret};return e.elements=e.stripe.elements(t),e.elements.create("payment").mount("#payment-element"),null},m=async()=>{e.processing=!0,e.error=null;const t=e.elements,{error:r}=await e.stripe.confirmPayment({elements:t,confirmParams:{return_url:o.returnUrl}});r&&(e.processing=!1,e.error=r.message)};return d(()=>{let t=document.createElement("script");t.setAttribute("src","https://js.stripe.com/v3/"),document.head.appendChild(t),t.onload=function(){l()}}),(t,r)=>(a(),u(S,{title:"Checkout"},{default:c(()=>[s("div",v,[s("form",{onSubmit:_(m,["prevent"]),id:"payment-form",class:"card bg-white","data-secret":""},[k,s("div",null,[s("div",null,"Job: "+i(n.job.title),1),s("div",null,"Total: $"+i(n.jobPrice/100),1)]),w,e.error?(a(),f("div",C,i(e.error),1)):b("",!0),h(x,{id:"submit",class:g(["mt-5",{"opacity-25":e.processing}]),disabled:e.processing},{default:c(()=>[y("Submit")]),_:1},8,["class","disabled"])],40,j)])]),_:1}))}};export{V as default};
