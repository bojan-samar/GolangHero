import{D as l,j as p,o as d,c as u,w as i,a as r,s as _,b as f,g,n as y}from"./app.2143d770.js";import{_ as S}from"./AppLayout.2cdd8085.js";import{_ as h}from"./PrimaryButton.b4399e01.js";import"./Banner.45585b35.js";const b={class:"py-12 max-w-4xl mx-auto"},x=["onSubmit"],w=r("div",{id:"payment-element"},null,-1),E={__name:"Index",props:{clientSecret:String,stripeKey:String,returnUrl:String},setup(o){const n=o,e=l({stripe:null,elements:null,processing:!1}),c=()=>{let t=document.createElement("script");t.setAttribute("src","https://js.stripe.com/v3/"),document.head.appendChild(t),setTimeout(()=>{e.stripe=Stripe(n.stripeKey);const s={clientSecret:n.clientSecret};e.elements=e.stripe.elements(s),e.elements.create("payment").mount("#payment-element")},200)},m=async()=>{e.processing=!0;const t=e.elements,{error:s}=await e.stripe.confirmPayment({elements:t,confirmParams:{return_url:n.returnUrl}});if(s){e.processing=!1;const a=document.querySelector("#error-message");a.textContent=s.message}};return p(()=>{c()}),(t,s)=>(d(),u(S,{title:"Checkout"},{default:i(()=>[r("div",b,[r("form",{onSubmit:_(m,["prevent"]),id:"payment-form",class:"card bg-white","data-secret":""},[w,f(h,{id:"submit",class:y(["mt-5",{"opacity-25":e.processing}]),disabled:e.processing},{default:i(()=>[g("Submit")]),_:1},8,["class","disabled"])],40,x)])]),_:1}))}};export{E as default};
