import{E as p,j as u,o as d,c as b,w as i,a as s,s as f,t as a,b as _,g,n as h}from"./app.1a30a6aa.js";import{_ as y}from"./AppLayout.2b792b18.js";import{_ as S}from"./PrimaryButton.3a933f69.js";import"./Banner.ff37b954.js";const x={class:"py-12 max-w-4xl mx-auto"},v=["onSubmit"],j=s("h1",{class:"text-center font-bold text-lg mb-4"},"Checkout",-1),C=s("div",{id:"payment-element",class:"mt-5"},null,-1),P={__name:"Index",props:{clientSecret:String,stripeKey:String,returnUrl:String,job:Object,jobPrice:Number},setup(r){const o=r,e=p({stripe:null,elements:null,processing:!1}),c=()=>{e.stripe=Stripe(o.stripeKey);const t={clientSecret:o.clientSecret};return e.elements=e.stripe.elements(t),e.elements.create("payment").mount("#payment-element"),null},l=async()=>{e.processing=!0;const t=e.elements,{error:n}=await e.stripe.confirmPayment({elements:t,confirmParams:{return_url:o.returnUrl}});if(n){e.processing=!1;const m=document.querySelector("#error-message");m.textContent=n.message}};return u(()=>{let t=document.createElement("script");t.setAttribute("src","https://js.stripe.com/v3/"),document.head.appendChild(t),t.onload=function(){c()}}),(t,n)=>(d(),b(y,{title:"Checkout"},{default:i(()=>[s("div",x,[s("form",{onSubmit:f(l,["prevent"]),id:"payment-form",class:"card bg-white","data-secret":""},[j,s("div",null,[s("div",null,"Job: "+a(r.job.title),1),s("div",null,"Total: $"+a(r.jobPrice/100),1)]),C,_(S,{id:"submit",class:h(["mt-5",{"opacity-25":e.processing}]),disabled:e.processing},{default:i(()=>[g("Submit")]),_:1},8,["class","disabled"])],40,v)])]),_:1}))}};export{P as default};
